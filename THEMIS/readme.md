## Code Summary

This Colab notebook processes THEMIS (Thermal Emission Imaging System) XML metadata and associated image data to analyze Martian surface temperatures, focusing on a specific region (Jezero crater) across different local solar times (LST).

**Main Steps:**

1.  **LST Indexing**: Extracts Local Solar Time (LST) from PDS4 THEMIS XML labels for a collection of data files and creates a CSV index (`themis_lst_index.csv`). This helps in categorizing observations by their time of day.
2.  **Data Mosaicking and Reprojection**: For predefined LST *fascias* (time windows), the script identifies relevant image files, reprojects them onto a common Mars Equidistant Cylindrical (EQC) grid, and generates median temperature mosaics. This process involves handling georeferencing and applying scaling/offset factors from the metadata.
3.  **High-Resolution Output (TIF & PNG)**: The median temperature mosaics and associated coverage counts (number of images contributing to each pixel) are saved as GeoTIFF files (`.tif`) and corresponding PNG visualizations for easy inspection.
4.  **Aggregated Grid Generation (100x100)**: The high-resolution median temperature data is resampled into a coarser 100x100 grid for each fascia, effectively averaging temperature values over larger blocks. This aggregated data is also saved as GeoTIFFs.
5.  **Visualization of Aggregated Data**: PNG visualizations of the 100x100 grids are generated, providing a simplified view of temperature distribution across the region with clear grid coordinates.
6.  **Summary Charts**: Histograms are created to show the distribution of temperatures within each 100x100 aggregated grid, illustrating temperature variability. A bar chart compares the mean temperatures across all fascias, providing an overview of diurnal temperature changes.
7.  **Machine Learning Data Export**: A final CSV file (`themis_ML_data_100x100.csv`) is generated, combining the x and y coordinates of the 100x100 grid with the mean temperature values for each fascia. This structured data is suitable for machine learning applications.

The notebook provides a comprehensive workflow from raw THEMIS metadata to processed and summarized temperature maps, suitable for further scientific analysis or machine learning tasks.


## List of Outputs Generated

Here is a list of the output files generated by this notebook, along with a brief explanation for each:

1.  **`/content/themis_lst_index.csv`**
    *   **Description**: A CSV file indexing all input XML files, their extracted Local Solar Time (LST), and their full file paths. It's used for organizing and selecting images based on LST.

2.  **`/content/themis_BT_{time_str}_median.tif`** (e.g., `themis_BT_5_30AM_median.tif`)
    *   **Description**: GeoTIFF files containing the median brightness temperature (BT) mosaic for each defined LST fascia. These are high-resolution gridded temperature maps, reprojected to a common Mars Equidistant Cylindrical projection.

3.  **`/content/themis_BT_{time_str}_count.tif`** (e.g., `themis_BT_5_30AM_count.tif`)
    *   **Description**: GeoTIFF files indicating, for each pixel in the mosaic, how many individual THEMIS images contributed to its median temperature calculation. This serves as a measure of data coverage and reliability.

4.  **`/content/themis_BT_{time_str}_median.png`** (e.g., `themis_BT_5_30AM_median.png`)
    *   **Description**: PNG image visualizations of the median brightness temperature mosaics. These plots include a consistent colorbar and geographic coordinates for easy interpretation.

5.  **`/content/themis_Coverage_{time_str}.png`** (e.g., `themis_Coverage_5_30AM.png`)
    *   **Description**: PNG image visualizations of the coverage count maps. These show the density of input data contributing to each pixel of the temperature mosaic, using a distinct colormap.

6.  **`/content/themis_Diff_7_00PM_vs_5_30AM.png`**
    *   **Description**: A PNG image visualizing the temperature difference between the `7:00 PM` fascia and the `5:30 AM` fascia. This highlights diurnal temperature variations across the region.

7.  **`/content/themis_BT_Grid100x100_{time_str}_median.tif`** (e.g., `themis_BT_Grid100x100_5_30AM_median.tif`)
    *   **Description**: GeoTIFF files containing the median brightness temperature, aggregated into a 100x100 grid for each LST fascia. These are coarser resolution temperature maps, useful for broader analysis.

8.  **`/content/themis_BT_Grid100x100_{time_str}_median.png`** (e.g., `themis_BT_Grid100x100_5_30AM_median.png`)
    *   **Description**: PNG image visualizations of the 100x100 aggregated temperature grids. These plots feature numerical axes (0-99 for X and Y) to represent the grid cells and provide a simplified, gridded view of the temperature distribution.

9.  **`/content/themis_TempHist_Grid100x100_{time_str}.png`** (e.g., `themis_TempHist_Grid100x100_5_30AM.png`)
    *   **Description**: PNG image visualizations of histograms showing the distribution of temperature values within each 100x100 aggregated grid. The Y-axis represents the 'Frequency (Number of Pixels)'.

10. **`/content/themis_MeanTemp_Grid100x100_BarChart.png`**
    *   **Description**: A PNG image visualizing a bar chart that compares the mean temperature across all LST fascias, calculated from the 100x100 aggregated grid data. This provides a quick comparison of average temperatures at different times of day.

11. **`/content/themis_ML_data_100x100.csv`**
    *   **Description**: A CSV file specifically prepared for machine learning tasks. It contains `x` and `y` coordinates (0-99 for the 100x100 grid cells) and the corresponding mean temperature values for each LST fascia (e.g., `mean_temperature_5_30AM`, `mean_temperature_7_00AM`, etc.).
